Fix a bug that the VCS revision is lost if the candidate metadata is cached during resolution.
