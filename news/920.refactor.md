Extract the environment related code from `Candidate` into a new class `PreparedCandidate`.
